<div th:fragment="myPages" xmlns:sec="http://www.thymeleaf.org/extras/spring-security" xmlns:th="http://www.thymeleaf.org">
    <link href="/css/myPagesCSS.css" rel="stylesheet" />
    <script>
        function openTab(event, tabName) {
            event.preventDefault(); // 페이지 새로 고침 방지
            $(".mypages-content").hide(); // 모든 콘텐츠를 숨김
            $("#" + tabName).show(); // 클릭한 탭의 콘텐츠만 보이도록 설정
        }
    </script>
    <div class="resume-section-content">
        <!-- 네비게이션 바 -->
        <section class="resume-section" id="myPages">
            <div class="mypages-navbarContainer">
                <div id="mypagesNavbar" class="mypages-navbar">
                    <a href="#" class="mypages-tablink" onclick="openTab(event, 'myrecipe')">나의 레시피</a>
                    <a href="#" class="mypages-tablink" onclick="openTab(event, 'subsService')">구독 서비스</a>
                    <a href="#" class="mypages-tablink" onclick="openTab(event, 'record')">소비 기록</a>
                    <a href="#" class="mypages-tablink" onclick="openTab(event, 'profileUpdate')">회원정보수정</a>
                    <a href="#" class="mypages-tablink" onclick="openTab(event, 'support')">이용문의</a>
                </div>
            </div>

            <!-- 구독 서비스 섹션 -->
            <div id="subsService" class="mypages-content">
                <!-- 비구독자일 경우 구독 정보를 보여주는 섹션 -->
                <div sec:authorize="hasRole('ROLE_USER')">
                    <div id="mypages-subscribeSection">
                        <h3>구독 서비스</h3>
                        <div class="mypages-subscription-info">
                            <p>구독 시 제공할 서비스</p>
                            <ul>
                                <li>광고 제거 기능</li>
                                <li>식단 점수 달력 제공</li>
                            </ul>
                            <p><strong>※ 구독 시 유의사항</strong></p>
                            <p>월 490원으로 제공되는 구독 서비스입니다. 결제는 매월 자동으로 이루어지며, 언제든지 구독을 취소할 수 있습니다.</p>
                            <p>구독 서비스는 「전자상거래 등에서의 소비자 보호에 관한 법률」에 따라 보호받습니다.</p>
                            <div>
                                <input type="checkbox" id="mypages-agreeTerms" name="mypages-agreeTerms" />
                                <label for="mypages-agreeTerms">결제에 동의함</label>
                            </div>
                        </div>
                        <button id="mypages-subscribeButton" onclick="subscribe()" disabled>결제</button>
                    </div>
                </div>

                <!-- 구독자인 경우 구독 취소 정보를 보여주는 섹션 -->
                <div sec:authorize="hasRole('ROLE_SUBSCRIBER')">
                    <div id="mypages-unsubscribeSection">
                        <h3>구독 서비스</h3>
                        <div class="mypages-subscription-info">
                            <p>구독으로 제공되고 있는 서비스</p>
                            <ul>
                                <li>광고 제거 기능</li>
                                <li>식단 점수 달력 제공</li>
                            </ul>
                        </div>
                        <div class="mypages-cancel-info">
                            <p>정말로 구독을 취소하시겠습니까?</p>
                            <button id="mypages-cancelNoButton" onclick="cancelNo()">아니오</button>
                            <button id="mypages-cancelYesButton" onclick="unsubscribe()">예</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 나머지 탭은 fragment로 분리해서 다른 HTML 파일로 관리 -->
<!--            <div th:replace="fragments/myrecipe :: myrecipeFragment"></div>-->
<!--            <div th:replace="fragments/record :: recordFragment"></div>-->
<!--            <div th:replace="fragments/profileUpdate :: profileUpdateFragment"></div>-->
<!--            <div th:replace="fragments/support :: supportFragment"></div>-->

            <!-- 회원 탈퇴 모달 창은 이 HTML에서 바로 처리 -->
            <div id="modal-deleteAccount" class="mypages-modal">
                <div class="mypages-modal-content">
                    <span class="mypages-close" onclick="closeModal('modal-deleteAccount')">&times;</span>
                    <h2>회원 탈퇴</h2>
                    <p>정말로 회원 탈퇴를 하시겠습니까? 탈퇴 시 모든 정보가 삭제됩니다.</p>
                    <button class="mypages-cancelNoButton" onclick="cancelDelete()">아니오</button>
                    <button class="mypages-cancelYesButton" onclick="deleteAccount()">예</button>
                </div>
            </div>
        </section>
    </div>
</div>
